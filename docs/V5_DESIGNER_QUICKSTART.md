# V5 模板设计器 - 快速入门指南

## 访问入口

### 方式一：模板测试页面（推荐）
访问：`http://localhost:3000/lowcode/TemplateTest`

这是最简单的入口，会显示所有可用的模板卡片。

### 方式二：从页面管理进入
1. 访问：`http://localhost:3000/lowcode/PageManage`
2. 点击"新增页面（V5模板）"按钮
3. 选择模板后进入设计器

## 设计器布局

```
+--------------------------------------------------+
|  返回  [页面名称✎] (模板名称)         预览  保存  |
+--------------------------------------------------+
|          |                              |         |
|  组件库  |        设计画布               |  属性面板 |
|          |                              |         |
|  - 表单  |   +---------------------+    |         |
|  - 表格  |   |   查询区            |    |  组件   |
|  - 按钮  |   +---------------------+    |  属性   |
|          |                              |  配置   |
|          |   +---------------------+    |         |
|          |   |   工具栏            |    |         |
|          |   +---------------------+    |         |
|          |                              |         |
|          |   +---------------------+    |         |
|          |   |   数据列表          |    |         |
|          |   +---------------------+    |         |
|          |                              |         |
+--------------------------------------------------+
```

## 使用步骤

### 1. 创建新页面

1. 访问模板测试页面
2. 点击想要的模板卡片
3. 进入设计器

### 2. 拖拽组件

1. 在左侧组件库中选择标签页（表单/表格/按钮）
2. 找到想要的组件
3. 拖拽到中间对应的设计区域

### 3. 编辑页面名称

- 点击顶部页面名称
- 输入新名称
- 点击外部或按 Enter 确认

### 4. 配置组件属性

1. 点击画布中已放置的组件
2. 在右侧属性面板中查看和修改属性

### 5. 预览和保存

- **预览**：点击预览按钮在新窗口查看效果（需要先保存）
- **保存**：点击保存按钮，会自动创建页面

## 三种模板说明

### 标准列表页
- **查询区**：放置表单配置（可选项）
- **工具栏**：放置按钮配置（可选项）
- **内容区**：放置表格配置（必需）

### 左树右表页
- **树形导航**：放置树形组件（必需）
- **数据列表**：放置表格或表单（必需）

### 表单页
- **表单内容**：放置表单配置（必需）

## 组件类型说明

### 表单组件
- 显示为带字段的表单
- 支持输入框、下拉框、日期选择等
- 可拖拽到查询区或内容区

### 表格组件
- 显示为带数据的表格
- 包含操作列（编辑、删除）
- 可拖拽到内容区

### 按钮组件
- 显示为 Element Plus 按钮
- 支持不同类型（primary、success等）
- 可拖拽到工具栏区

## 技术细节

### 配置格式（V5）
```json
{
  "version": "v5",
  "templateId": "standard-list",
  "components": {
    "search": [{ "id": "comp_xxx", "type": "form", "refId": 123 }],
    "toolbar": [{ "id": "comp_yyy", "type": "button", "refId": 456 }],
    "content": [{ "id": "comp_zzz", "type": "table", "refId": 789 }]
  }
}
```

### 与 V3 的区别
- V5 使用组件引用（refId），而不是直接存储配置
- V5 支持多种模板，每种模板有独立的设计器
- V5 设计器和渲染器分离，更灵活

## 常见问题

### Q: 保存后在哪里查看页面？
A: 保存后页面会创建在数据库中，可以在页面管理列表中找到。

### Q: 如何编辑已保存的页面？
A: 在页面管理中点击"设计"按钮（V5版本的页面）。

### Q: 拖拽后没有显示组件？
A: 检查组件类型是否与区域类型匹配，例如内容区只能放置表格或表单。

### Q: 预览功能为什么不能用？
A: 预览功能需要先保存页面，因为需要页面ID来加载配置。

## 开发说明

### 添加新模板
1. 创建设计器组件：`designer-templates/XXXTemplate.vue`
2. 创建渲染器组件：`render-templates/XXXRender.vue`
3. 在 `config/templates/registry.ts` 中注册

### 添加新组件类型
1. 更新 `types/template.ts` 中的 ComponentRef 类型
2. 在组件库面板中添加加载逻辑
3. 在模板设计器中添加渲染逻辑

## 下一步计划

- [ ] 支持从表单/表格设计器直接配置字段
- [ ] 添加撤销/重做功能
- [ ] 支持复制/粘贴组件
- [ ] 添加更多预定义模板
- [ ] 支持自定义样式
